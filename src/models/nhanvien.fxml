<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.Node?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.control.Pagination?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.layout.TilePane?>

<BorderPane fx:id="root" prefWidth="1200" prefHeight="800"
            stylesheets="@styles_nv.css"
            xmlns="http://javafx.com/javafx/25"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controllers.NhanVienController">

    <!-- ======= Thanh tiÃªu Ä‘á» / cÃ´ng cá»¥ nhanh ======= -->
    <top>
        <HBox spacing="12" styleClass="appbar">
            <children>
                <Label text="ðŸŽ¬ Quáº£n trá»‹ bÃ¡n vÃ©" styleClass="appbar-title"/>

                <!-- TÃ¬m kiáº¿m nhanh phim/suáº¥t/khÃ¡ch hÃ ng -->
                <TextField fx:id="txtSearch" promptText="TÃ¬m phim / suáº¥t chiáº¿u / khÃ¡ch hÃ ngâ€¦" HBox.hgrow="ALWAYS"/>

                <DatePicker fx:id="dpNgay" promptText="HÃ´m nay"/>
                <ComboBox fx:id="cbRap" promptText="Ráº¡p" prefWidth="140"/>
                <ComboBox fx:id="cbPhong" promptText="PhÃ²ng" prefWidth="140"/>

                <Separator orientation="VERTICAL"/>

                <Button fx:id="btnBanVe" text="BÃ¡n vÃ© (F1)" styleClass="btn-primary"/>
                <Button fx:id="btnDoiVe" text="Äá»•i vÃ© (F2)"/>
                <Button fx:id="btnTraVe" text="Tráº£ vÃ© (F3)"/>

                <Pane HBox.hgrow="ALWAYS"/>

                <!-- TÃ i khoáº£n nhÃ¢n viÃªn -->
                <MenuButton fx:id="mbUser" text="NV: ..." styleClass="user-chip">
                    <items>
                        <MenuItem text="ThÃ´ng tin cÃ¡ nhÃ¢n" fx:id="miProfile"/>
                        <MenuItem text="Äá»•i máº­t kháº©u" fx:id="miChangePwd"/>
                        <SeparatorMenuItem />
                        <MenuItem text="ÄÄƒng xuáº¥t" fx:id="miLogout"/>
                    </items>
                </MenuButton>
            </children>
            <padding>
                <Insets top="10" right="12" bottom="10" left="12"/>
            </padding>
        </HBox>
    </top>

    <!-- ======= Thanh Ä‘iá»u hÆ°á»›ng trÃ¡i ======= -->
    <left>
        <VBox spacing="8" styleClass="sidebar">
            <children>
                <Label text="TÃ­nh nÄƒng" styleClass="sidebar-title"/>
                <ToggleButton fx:id="navBanVe" text="BÃ¡n vÃ©" selected="true" toggleGroup="$nav"/>
                <ToggleButton fx:id="navSuatChieu" text="Suáº¥t chiáº¿u" toggleGroup="$nav"/>
                <ToggleButton fx:id="navPhim" text="Phim" toggleGroup="$nav"/>
                <ToggleButton fx:id="navKhachHang" text="KhÃ¡ch hÃ ng" toggleGroup="$nav"/>
                <ToggleButton fx:id="navHoaDon" text="HÃ³a Ä‘Æ¡n" toggleGroup="$nav"/>
                <Separator/>
                <ToggleButton fx:id="navCombo" text="Báº¯p â€“ NÆ°á»›c" toggleGroup="$nav"/>
                <ToggleButton fx:id="navKhuyenMai" text="Khuyáº¿n mÃ£i" toggleGroup="$nav"/>
            </children>
            <padding>
                <Insets top="12" right="8" bottom="12" left="8"/>
            </padding>
        </VBox>
    </left>

    <!-- ======= Khu vá»±c ná»™i dung trung tÃ¢m ======= -->
    <center>
        <TabPane fx:id="mainTabs" tabClosingPolicy="UNAVAILABLE">
            <!-- Tab 1: Suáº¥t chiáº¿u hÃ´m nay (Æ°u tiÃªn cho NV quáº§y vÃ©) -->
            <tabs>
                <Tab text="Suáº¥t chiáº¿u hÃ´m nay">
                    <content>
                        <VBox spacing="12" styleClass="content-area">
                            <children>
                                <!-- Bá»™ lá»c nhanh -->
                                <HBox spacing="8">
                                    <children>
                                        <ComboBox fx:id="cbTheLoai" promptText="Thá»ƒ loáº¡i" prefWidth="160"/>
                                        <ComboBox fx:id="cbDinhDang" promptText="Äá»‹nh dáº¡ng (2D/3D/IMAX)" prefWidth="190"/>
                                        <CheckBox fx:id="ckcConVe" text="CÃ²n vÃ©"/>
                                        <CheckBox fx:id="ckcSapChieu" text="Sáº¯p chiáº¿u"/>
                                        <Pane HBox.hgrow="ALWAYS"/>
                                        <Button fx:id="btnRefresh" text="LÃ m má»›i"/>
                                    </children>
                                </HBox>

                                <!-- Báº£ng suáº¥t chiáº¿u -->
                                <TableView fx:id="tblSuatChieu" VBox.vgrow="ALWAYS">
                                    <columns>
                                        <TableColumn fx:id="colPoster" text="Poster" prefWidth="90"/>
                                        <TableColumn fx:id="colTenPhim" text="Phim" prefWidth="260"/>
                                        <TableColumn fx:id="colPhong" text="PhÃ²ng" prefWidth="90"/>
                                        <TableColumn fx:id="colGio" text="Giá»" prefWidth="100"/>
                                        <TableColumn fx:id="colGia" text="GiÃ¡ (â‚«)" prefWidth="110"/>
                                        <TableColumn fx:id="colTrangThai" text="Tráº¡ng thÃ¡i" prefWidth="120"/>
                                        <TableColumn fx:id="colHanhDong" text="HÃ nh Ä‘á»™ng" prefWidth="200"/>
                                    </columns>
                                </TableView>

                                <!-- PhÃ¢n trang + tá»•ng quan -->
                                <HBox spacing="10" alignment="CENTER_RIGHT">
                                    <children>
                                        <Label fx:id="lblTongSuat" text="0 suáº¥t"/>
                                        <Pagination fx:id="paginationSuatChieu" maxPageIndicatorCount="7"/>
                                    </children>
                                </HBox>
                            </children>
                            <padding>
                                <Insets top="12" right="12" bottom="12" left="12"/>
                            </padding>
                        </VBox>
                    </content>
                </Tab>

                <!-- Tab 2: Phim Ä‘ang chiáº¿u (dáº¡ng poster card) -->
                <Tab text="Phim Ä‘ang chiáº¿u">
                    <content>
                        <ScrollPane fitToWidth="true">
                            <content>
                                <VBox spacing="12" styleClass="content-area">
                                    <children>
                                        <Label text="ðŸŽžï¸ Danh sÃ¡ch phim" styleClass="section-title"/>
                                        <TilePane fx:id="tilePhimDangChieu" hgap="16" vgap="16" prefColumns="5"/>
                                    </children>
                                    <padding>
                                        <Insets top="12" right="12" bottom="24" left="12"/>
                                    </padding>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </content>
                </Tab>

                <!-- Tab 3: KhÃ¡ch hÃ ng (tá»‘i giáº£n cho NV) -->
                <Tab text="KhÃ¡ch hÃ ng">
                    <content>
                        <VBox spacing="10" styleClass="content-area">
                            <children>
                                <HBox spacing="8">
                                    <children>
                                        <TextField fx:id="txtSearchKH" promptText="TÃ¬m khÃ¡ch hÃ ng theo tÃªn / SÄTâ€¦" HBox.hgrow="ALWAYS"/>
                                        <Button fx:id="btnThemKH" text="ThÃªm KH"/>
                                    </children>
                                </HBox>
                                <TableView fx:id="tblKhachHang" VBox.vgrow="ALWAYS">
                                    <columns>
                                        <TableColumn fx:id="colMaKH" text="MÃ£" prefWidth="80"/>
                                        <TableColumn fx:id="colTenKH" text="TÃªn khÃ¡ch" prefWidth="220"/>
                                        <TableColumn fx:id="colSdt" text="SÄT" prefWidth="150"/>
                                        <TableColumn fx:id="colHangTV" text="Háº¡ng TV" prefWidth="110"/>
                                        <TableColumn fx:id="colDiem" text="Äiá»ƒm" prefWidth="90"/>
                                        <TableColumn fx:id="colKhAction" text="HÃ nh Ä‘á»™ng" prefWidth="160"/>
                                    </columns>
                                </TableView>
                            </children>
                            <padding>
                                <Insets top="12" right="12" bottom="12" left="12"/>
                            </padding>
                        </VBox>
                    </content>
                </Tab>

                <!-- Tab 4: HÃ³a Ä‘Æ¡n (tra cá»©u nhanh) -->
                <Tab text="HÃ³a Ä‘Æ¡n">
                    <content>
                        <VBox spacing="10" styleClass="content-area">
                            <children>
                                <HBox spacing="8">
                                    <children>
                                        <DatePicker fx:id="dpFrom" promptText="Tá»« ngÃ y"/>
                                        <DatePicker fx:id="dpTo" promptText="Äáº¿n ngÃ y"/>
                                        <TextField fx:id="txtMaHD" promptText="MÃ£ hÃ³a Ä‘Æ¡n"/>
                                        <Pane HBox.hgrow="ALWAYS"/>
                                        <Button fx:id="btnTraCuuHD" text="Tra cá»©u"/>
                                    </children>
                                </HBox>
                                <TableView fx:id="tblHoaDon" VBox.vgrow="ALWAYS">
                                    <columns>
                                        <TableColumn fx:id="colMaHD" text="MÃ£" prefWidth="100"/>
                                        <TableColumn fx:id="colNgay" text="NgÃ y" prefWidth="160"/>
                                        <TableColumn fx:id="colNhanVien" text="NhÃ¢n viÃªn" prefWidth="160"/>
                                        <TableColumn fx:id="colKhach" text="KhÃ¡ch" prefWidth="200"/>
                                        <TableColumn fx:id="colTongTien" text="Tá»•ng tiá»n (â‚«)" prefWidth="140"/>
                                        <TableColumn fx:id="colHdAction" text="HÃ nh Ä‘á»™ng" prefWidth="160"/>
                                    </columns>
                                </TableView>
                            </children>
                            <padding>
                                <Insets top="12" right="12" bottom="12" left="12"/>
                            </padding>
                        </VBox>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </center>

    <!-- ======= Thanh tráº¡ng thÃ¡i dÆ°á»›i cÃ¹ng ======= -->
    <bottom>
        <HBox spacing="18" styleClass="statusbar">
            <children>
                <Label fx:id="lblWelcome" text="Xin chÃ o, â€¦"/>
                <Separator orientation="VERTICAL"/>
                <Label text="PhÃ­m táº¯t: F1 BÃ¡n vÃ© Â· F2 Äá»•i vÃ© Â· F3 Tráº£ vÃ© Â· Ctrl+F TÃ¬m kiáº¿m"/>
                <Pane HBox.hgrow="ALWAYS"/>
                <Label fx:id="lblClock" text="--:--"/>
            </children>
            <padding>
                <Insets top="6" right="12" bottom="6" left="12"/>
            </padding>
        </HBox>
    </bottom>
</BorderPane>